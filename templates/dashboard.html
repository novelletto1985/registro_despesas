<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Dashboard de Despesas</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <h1>Dashboard de Despesas</h1>

    <form method="GET" action="/dashboard">
        <label for="ano">Ano:</label>
        <select name="ano" id="ano">
            {% for ano in anos %}
            <option value="{{ ano }}" {% if ano == ano_selecionado %}selected{% endif %}>{{ ano }}</option>
            {% endfor %}
        </select>

        <label for="mes">Mês:</label>
        <select name="mes" id="mes">
            <option value="">Todos</option>
            {% for m in range(1, 13) %}
            <option value="{{ m }}" {% if m == mes_selecionado %}selected{% endif %}>{{ m }}</option>
            {% endfor %}
        </select>

        <button type="submit">Filtrar</button>
    </form>

    <div>
        <h2>Gastos por Mês</h2>
        {{ grafico_total|safe }}
    </div>
    <div>
        <h2>Por Forma de Pagamento</h2>
        {{ grafico_pagamento|safe }}
    </div>
    <div>
        <h2>Por Categoria</h2>
        {{ grafico_categoria|safe }}
    </div>
    <div>
        <h2>Por Subcategoria</h2>
        {{ grafico_subcategoria|safe }}
    </div>
</body>
</html>
